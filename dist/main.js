!function(){"use strict";!function(){class t{constructor(t){this.xCoordinate=t.xCoordinate,this.yCoordinate=t.yCoordinate,this.xVelocity=t.xVelocity,this.yVelocity=t.yVelocity,this.color=t.color,this.transparency=t.transparency||1}move(){this.xCoordinate=this.xCoordinate+this.xVelocity,this.yCoordinate=this.yCoordinate+this.yVelocity}}class e extends t{constructor(t){super(t),this.width=t.width,this.height=t.height}draw(t){const e=t.createLinearGradient(this.xCoordinate,this.yCoordinate,this.xCoordinate,this.yCoordinate+this.height);e.addColorStop(0,"#abdbe3"),e.addColorStop(.3,"#76b5c5"),e.addColorStop(.5,"#76b5c5"),e.addColorStop(.7,"#76b5c5"),e.addColorStop(1,"#abdbe3"),t.fillStyle=e,t.fillRect(this.xCoordinate,this.yCoordinate,this.width,this.height)}}class r extends e{constructor(t){super(t),this.character=t.character,this.color=t.color||"black",this.canvasInterface=t.canvasInterface,this.typeable=t.typeable,this.points=0}draw(t){t.fillStyle=this.color,t.font=r.FONT,t.fillText(this.character,this.xCoordinate,this.yCoordinate)}get height(){this.canvasInterface.font=r.FONT;const t=this.canvasInterface.measureText(this.character);return t.actualBoundingBoxAscent+t.actualBoundingBoxDescent}set height(t){}}var i,a,s;function h(t){return t.length?t[Math.floor(Math.random()*t.length)]:null}i=r,s="20px Alkatra",(a=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(a="FONT"))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s;const o=document.getElementById("message");function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";o.style.backgroundColor=r,o.style.color=e,o.innerHTML=t}class c extends t{constructor(t){super(t),this.canvasInterface=t.canvasInterface,this.radius=30,this.charCount=10,this.points=function(t,e,r,i){const a=[];for(let s=0;s<i;s++){const h=2*s*Math.PI/i,o=t+r*Math.cos(h),n=e+r*Math.sin(h);a.push({x:o,y:n})}return a}(this.xCoordinate,this.yCoordinate,this.radius,this.charCount),this.characters=[],this.createChars(),this.counter=0,this.xDrop=this.points[0].x,this.yDrop=this.points[0].y}createChars(){for(let t=0;t<this.charCount;t++){const e=new r({xCoordinate:this.points[t].x,yCoordinate:this.points[t].y,xVelocity:0,yVelocity:0,character:"abcdefghijk"[t],canvasInterface:this.canvasInterface,typeable:!1});this.characters.push(e)}}move(){if(++this.counter,this.counter%3==0){let t=this.characters[0].xCoordinate,e=this.characters[0].yCoordinate;for(let t=0;t<this.characters.length-1;t++){const e=this.characters[t];e.xCoordinate=this.characters[t+1].xCoordinate,e.yCoordinate=this.characters[t+1].yCoordinate}let r=this.characters[this.characters.length-1];r.xCoordinate=t,r.yCoordinate=e}}draw(){this.characters.forEach((t=>{t.draw(this.canvasInterface)}))}}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class d{constructor(t){this.canvasInterface=t,this.width=t.canvas.width,this.height=t.canvas.height,this.gameOver=!1,this.paused=!0,this.scoreOutput=document.getElementById("game-score"),this.livesOutput=document.getElementById("game-lives"),this.reset(),this.xCharOptions=[.2*this.width,.4*this.width,.6*this.width,.8*this.width],this.targetBar=new e({xCoordinate:0,yCoordinate:.75*this.height,xVelocity:0,yVelocity:0,color:"lightgrey",width:this.width,height:50,canvasInterface:this.canvasInterface}),this.img=new Image,this.img.src="assets/fullLegalPad500.png",this.img.onload=()=>{this.drawBackdrop(),this.targetBar.draw(this.canvasInterface)},this.wordSpirals=[],this.xCharOptions.forEach((t=>{const e=new c({xCoordinate:t,yCoordinate:.2*this.height,xVelocity:0,yVelocity:0,canvasInterface:this.canvasInterface});this.wordSpirals.push(e)}))}printScore(){this.scoreOutput.innerHTML=this.score}printLives(){this.livesOutput.innerHTML=this.lives}addChar(){const t=this.targetArray[0];if(this.wordPause--,this.wordPause>0)--this.wordPause;else if(this.characters.length>=1&&this.characters[this.characters.length-1].yCoordinate<=.05*this.height);else if(" "===t)this.targetArray.shift(),this.wordPause=3,this.charVel=1.2*this.charVel;else if(this.targetArray.length>0&&this.wordPause<=0){const t=new r({xCoordinate:h(this.wordSpirals).xDrop,yCoordinate:this.wordSpirals[0].yDrop,xVelocity:0,yVelocity:this.charVel,character:this.targetArray.shift(),canvasInterface:this.canvasInterface,typeable:!1});this.characters.push(t)}else 0===this.characters.length&&this.resetSentence()}resetSentence(){var t;this.targetSentence=`${h(d.ADJECTIVES)} ${h(d.NOUNS)}s ${h(d.VERBS)} ${h(d.ADVERBS)}`,this.targetArray=Array.from(this.targetSentence),t=this.targetSentence,document.getElementById("sentence").innerHTML=t}step(){for(let t=this.characters.length-1;t>=0;t--){const e=this.characters[t];e.move(),this.charOffCanvas(e)?this.characters.splice(t,1):this.colorChar(e)}this.wordSpirals.forEach((t=>{t.move()})),this.hasLives()||(this.pause(),this.slowChars(),this.gameOver=!0)}slowChars(){console.log("chars slowed"),this.characters.forEach((t=>{t.yVelocity=.8})),this.wordPause=15,this.charVel=2}hasLives(){return this.lives>0}charOffCanvas(t){if(t.yCoordinate>this.height+t.height){this.lives--;let e="";return this.hasLives()||(e=". Enter to replay"),n(`Oh no, you missed ${t.character}${e}`,"black","grey"),this.slowChars(),this.animate(!1),!0}return!1}animate(){this.drawBackdrop(),this.targetBar.draw(this.canvasInterface),this.characters.forEach((t=>{t.draw(this.canvasInterface)})),this.wordSpirals.forEach((t=>{t.draw()})),this.drawCounters()}drawCounters(){this.printLives(),this.printScore()}start(){n(""),this.paused=!1,this.gameInterval=setInterval((()=>{this.gameOver&&(this.reset(),this.gameOver=!1),this.step(),this.gameOver||this.animate()}),17),this.charInterval=setInterval((()=>{this.addChar()}),500)}pause(){clearInterval(this.gameInterval),clearInterval(this.charInterval),this.paused=!0,this.drawCounters(),this.addOverlay()}addOverlay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grey",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.canvasInterface.globalAlpha=e,this.canvasInterface.fillStyle=t,this.canvasInterface.fillRect(0,0,this.width,this.height),this.canvasInterface.globalAlpha=1}colorChar(t){const e=this.targetBar.yCoordinate,r=this.targetBar.yCoordinate+this.targetBar.height+t.height;if(t.yCoordinate>=e&&t.yCoordinate<=r){let i=r-e,a=(t.yCoordinate-e)/i;a>=.2&&a<=.8?(t.color="yellow",t.points=15):(t.color="red",t.points=10),t.typeable=!0}else t.typeable=!1,t.points=0,t.color="black"}checkEntry(t){let e=null;const r=this.characters.filter((r=>{if(r.character===t&&r.typeable)return 15===r.points?n("Right on target - Nice!","red","gold"):n("Close....","black","grey"),this.score=Math.floor(this.score+r.points*r.yVelocity),!0;r.typeable&&(e=r.character)}));if(!(r.length>0)){this.lives=this.lives-1;let r=". Enter to continue.";return e&&(r=` instead of ${e}`),this.hasLives()||(r+=". Space to replay!"),n(`Argh. You entered ${t}${r}`,"yellow","red"),this.slowChars(),this.animate(!1),!1}r.forEach((t=>{const e=this.characters.indexOf(t);this.characters.splice(e,1)}))}drawBackdrop(){this.canvasInterface.clearRect(0,0,this.width,this.height),this.canvasInterface.globalAlpha=.4,this.canvasInterface.drawImage(this.img,0,0),this.canvasInterface.globalAlpha=1}reset(){this.characters=[],this.score=0,this.lives=3,this.charX=null,this.resetSentence(),this.wordPause=0,this.charVel=2,this.printLives(),this.printScore()}}l(d,"ADJECTIVES",["furry","happy","gloomy","friendly"]),l(d,"NOUNS",["dog","cat","tree","mountain"]),l(d,"VERBS",["ran","jumped","slept","ate"]),l(d,"ADVERBS",["quickly","slowly","loudly","quietly"]);class u{constructor(t){this.canvasInterface=t,this.game=new d(t),this.bindKeys(),this.updateHTMLScore()}bindKeys(){document.addEventListener("keydown",(t=>{this.handleKey(t)}))}handleKey(t){const e=t.key;" "===e||"Enter"===e?this.gameToggle():"ArrowRight"===e?(this.game.step(),this.game.animate()):u.INPUT.indexOf(e)>=0&&!this.game.paused&&this.game.checkEntry(e)}checkGame(){this.game.gameOver&&(clearInterval(this.gameCheckInterval),(""===document.cookie||this.game.score>this.cookieScore())&&(document.cookie=`highScore=${this.game.score}`,this.updateHTMLScore()))}cookieScore(){let t=null;const e=document.cookie.split(";");for(let r=0;r<e.length;r++){const i=e[r].split("=");if("highScore"===i[0]){t=parseInt(i[1]);break}}return t}updateHTMLScore(){const t=this.cookieScore();document.getElementById("scores").innerHTML=t?`High Score: ${t}`:"No high score...yet"}gameToggle(){this.game.paused?(this.game.start(),this.gameCheckInterval=setInterval((()=>{this.checkGame()}),17)):(clearInterval(this.gameCheckInterval),this.game.pause())}}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(u,"INPUT",["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","y","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","Y","X","Y","Z"]);const g=document.getElementById("game-canvas");g.width=500,g.height=500;const y=g.getContext("2d"),f=new u(y);window.view=f}()}();
//# sourceMappingURL=main.js.map